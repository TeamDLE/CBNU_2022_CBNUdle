<!doctype html>
<html lang="ko">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<head>
    <meta charsret="utf-8" />
    <title>Team DLE</title>
    <link rel="stylesheet" href="assets/css/main.css">
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
	<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
    <script src="script/core.js"></script>
    <script>
      //ê±´ë¬¼ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
      var building = 
      [{"key":1,"building_Code":"N10","building_Name":"ëŒ€í•™ ë³¸ë¶€,êµ­ì œêµë¥˜ì›","latitude":36.629976,"longitude":127.455165},
      {"key":2,"building_Code":"N12","building_Name":"ì¤‘ì•™ë„ì„œê´€","latitude":36.629976,"longitude":127.455165},
      {"key":3,"building_Code":"N13","building_Name":"ê²½ì˜í•™ê´€","latitude":36.611170,"longitude":127.471715},
      {"key":4,"building_Code":"N14","building_Name":"ì¸ë¬¸ì‚¬íšŒê´€(ê°•ì˜ë™)","latitude":36.630988,"longitude":127.456510},
      {"key":5,"building_Code":"N15","building_Name":"ì‚¬íšŒê³¼í•™ëŒ€í•™ë³¸ê´€","latitude":36.629775,"longitude":127.457655},
      {"key":6,"building_Code":"N16-1","building_Name":"ì¸ë¬¸ëŒ€í•™ë³¸ê´€","latitude":36.630025,"longitude":127.458740},
      {"key":7,"building_Code":"N16-3","building_Name":"ë¯¸ìˆ ê³¼","latitude":36.630698,"longitude":127.458337},
      {"key":8,"building_Code":"N17-3","building_Name":"ê°œì„±ì¬(ì§„ë¦¬ê´€)","latitude":36.631004,"longitude":127.457761},
      {"key":9,"building_Code":"N18","building_Name":"ë²•í•™ê´€","latitude":36.631681,"longitude":127.454547},
      {"key":10,"building_Code":"E1-2","building_Name":"ì‚¬ë²”ëŒ€í•™ê°•ì˜ë™","latitude":36.628941,"longitude":127.460918},
      {"key":11,"building_Code":"E2","building_Name":"ê°œì‹ ë¬¸í™”ê´€","latitude":36.628319,"longitude":127.459351},
      {"key":12,"building_Code":"E3","building_Name":"ì œ1í•™ìƒíšŒê´€","latitude":36.627587,"longitude":127.459073},
      {"key":13,"building_Code":"E3-1","building_Name":"NHê´€","latitude":36.627245,"longitude":127.459403},
      {"key":14,"building_Code":"E4-1","building_Name":"ì‹¤ë‚´ì²´ìœ¡ê´€","latitude":36.627215,"longitude":127.460593},
      {"key":15,"building_Code":"E5","building_Name":"123í•™êµ°ë‹¨","latitude":36.627139,"longitude":127.461615},
      {"key":16,"building_Code":"E7-1","building_Name":"ì˜ê³¼ëŒ€í•™","latitude":36.625081,"longitude":127.460956},
      {"key":17,"building_Code":"E8-1","building_Name":"ê³µí•™ê´€(ê³µê³¼ëŒ€í•™ ë³¸ê´€)","latitude":36.627097,"longitude":127.458160},
      {"key":18,"building_Code":"E8-3","building_Name":"ê±´ì„¤ê³µí•™ê´€","latitude":36.626010,"longitude":127.458459},
      {"key":19,"building_Code":"E8-6","building_Name":"í† ëª©ê³µí•™ê´€","latitude":36.624542,"longitude":127.458464},
      {"key":20,"building_Code":"E8-7","building_Name":"ì „ìì •ë³´1ê´€","latitude":36.625643,"longitude":127.457657},
      {"key":21,"building_Code":"E12-1","building_Name":"ìˆ˜ì˜ê³¼ëŒ€í•™ë°ë™ë¬¼ì˜ë£Œì„¼í„°","latitude":36.623181,"longitude":127.456207},
      {"key":22,"building_Code":"S1-2","building_Name":"ìì—°ê³¼í•™ëŒ€í•™","latitude":36.627156,"longitude":127.456989},
      {"key":23,"building_Code":"S2","building_Name":"ì „ì‚°ì •ë³´ì›","latitude":36.626248,"longitude":127.455469},
      {"key":24,"building_Code":"S4-1","building_Name":"ì „ìì •ë³´3ê´€","latitude":36.625622,"longitude":127.454468},
      {"key":25,"building_Code":"S8","building_Name":"ì•¼ì™¸ê³µì—°ì¥","latitude":36.626860,"longitude":127.453959},
      {"key":26,"building_Code":"S9","building_Name":"ë°•ë¬¼ê´€","latitude":36.627650,"longitude":127.455518},
      {"key":27,"building_Code":"S17-1","building_Name":"ì–‘ì„±ì¬(ì§€ì„ ê´€)","latitude":36.627610,"longitude":127.452403},
      {"key":28,"building_Code":"S21-4","building_Name":"ë†í•™ê´€ ê°•ì˜ë™","latitude":36.629442,"longitude":127.452639}]; 
      $(function() 
      {
        for (var i = 0; i < building.length; i++) 
        {
          let temp_html = '<option value="' + building[i].building_Code + '">' + building[i].building_Code + ' ' + building[i].building_Name + '</option>';
          $('.listBox').append(temp_html);
        }
      });
      
      var randomKey = Math.floor(Math.random() * 29);
      var answer = building[randomKey]; //ëœë¤ìœ¼ë¡œ ì •ë‹µì„ í•˜ë‚˜ ê³ ë¥¸ë‹¤.
      //ê±´ë¬¼ ì´ë¯¸ì§€ ë¡œë”©
      let buildingImage = '<img src="PhotoSet/'+ answer.building_Code.toLowerCase() +'/01.jpg" width="80%" height="auto" />';

      $(function(){$('.building_image').append(buildingImage);});
      var tryCount = 1;
      
      //ë‹µì„ ê³ ë¥´ê³  ì •ë‹µì¸ì§€ í™•ì¸í•œë‹¤.
      // isCorrectë¥¼ ì‚¬ìš©í•´ì„œ ì •ë‹µì´ ë§ëŠ”ì§€ë¥¼ í™•ì¸í•˜ê³ , 0ì´ë©´ ì •ë‹µì²˜ë¦¬, 0ì´ ì•„ë‹ˆë©´ ë“¤ì–´ì˜¨ ê±°ë¦¬ì™€ ë°©í–¥ì •ë³´ë¥¼ ë„ìš°ê³  ê¸°íšŒ í•˜ë‚˜ë¥¼ ì°¨ê°í•œë‹¤.
      var answerLat = answer.latitude;
      var answerLong = answer.longitude;
    </script>
</head>

<header>
  <div class="logo" style="text-align: center; vertical-align: bottom;"><img src="image/cbnudle.png" width="80%" height="auto" style="max-width: 800px" /></div>
  <a class="icon solid style2 major fa-bolt" type="button" onclick="overlay_Howtoplay()"  style="display: inline-block; vertical-align: bottom; padding-right: 5%;"><span class="label">HowToPlay</span></a>
  <a href="page/BuildingList.html" class="icon solid style2 major fa-hashtag" type="button" style="display: inline-block; vertical-align: bottom;"><span class="label">BuildingList</span></a>
  <hr width=100% color=black SIZE=8>

</header>


<div class="inner">
	<body class="is-preload">
	<div id="wrapper" class="divided">
<section class="wrapper style1 align-center">
<div class="inner">
    <!--Building Section-->
    <!-- DBì—ì„œ ì˜¤ëŠ˜ì˜ ê±´ë¬¼ì„ ê°€ì ¸ì™”ë‹¤ë©´ ê·¸ ê±´ë¬¼ ì½”ë“œë¥¼ ê°€ì ¸ì™€ì„œ imageì•ˆì— ìˆëŠ” í•´ë‹¹ ê±´ë¬¼ ì‚¬ì§„ì„ ê°€ì ¸ì˜´. 
    ì•„ë‹ˆë©´... ëœë¤ ê±´ë¬¼ì‚¬ì§„ì„ ê°€ì ¸ì™€ì„œ ì—°ì† ì •ë‹µ?-->
	
	<p style="font-size: xx-large; font-weight: bolder;">ì—¬ê¸°ëŠ” ì–´ë””ì¼ê¹Œìš”...</p>
	<!-- Gallery -->
    <div class ="building_image">
    </div>

	<h6> </h6>
    <!--Try Section-->
    <div class="try">
	<div class="flex-container">
        <div class="t1_building"></div>
        <div class="t1_distance"></div>
        <div class="t1_direction"></div>
		</div>
    </div>
    <div class="try">
	<div class="flex-container">
        <div class="t2_building"></div>
        <div class="t2_distance"></div>
        <div class="t2_direction"></div>
    </div>
	</div>
    <div class="try">
	<div class="flex-container">
        <div class="t3_building"></div>
        <div class="t3_distance"></div>
        <div class="t3_direction"></div>
    </div>
	</div>
    <div class="try">
	<div class="flex-container">
        <div class="t4_building"></div>
        <div class="t4_distance"></div>
        <div class="t4_direction"></div>
    </div>
	</div>
    <div class="try">
	<div class="flex-container">
        <div class="t5_building"></div>
        <div class="t5_distance"></div>
        <div class="t5_direction"></div>
    </div>
	</div>
    <div class="try">
	<div class="flex-container">
      <div class="t6_building"></div>
      <div class="t6_distance"></div>
      <div class="t6_direction"></div>
  </div>
	</div>
    <div id="guess_submit">
      <select class="listBox" id="building_list">
      </select>
	  <h6> </h6>
      <input type="button" onclick="guess_answer()" value="ì œì¶œ!" />
    </div>

     <!-- ê²°ê³¼ì°½ -->
  <div class="resultOverlay" style="display: none;" color="white">
    <h1 style="color:white; font-weight: bolder; margin-top: 5%;">ëë‚¬ìŠµë‹ˆë‹¤!</h1>
    <span class="answerResult"></span>
    <span class="tryCount"></span>
    <input class="button" onclick="location.reload()" value="ë‹¤ì‹œí•˜ê¸°" style="margin-top: 1%;"/>
		<ul class="icons" style="margin-top: 1%;">
      <a href="#n" onclick="fn_sendFB('facebook');return false;" class="icon brands style2 fa-facebook-f" target="_self" title="í˜ì´ìŠ¤ë¶ ê³µìœ " style="margin-right: 1%;"></a>
      <a href="#n" onclick="fn_sendFB('twitter');return false;" class="icon brands style2 fa-twitter" target="_self" title="íŠ¸ìœ„í„° ê³µìœ "></a>
   	</ul>
  </div>
	
  <!-- í•˜ëŠ” ë°©ë²• -->
  <div class="howtoplayOverlay" style="display: none;">
    <br/>
    <h1 style="color:white; font-weight: bolder; margin-top: 5%;">í•˜ëŠ” ë°©ë²•</h1>
    <h3 style="color:white;"> ì‚¬ì§„ì„ ë³´ê³ , ê±´ë¬¼ì˜ ì´ë¦„ì„ ì•Œì•„ë§ì¶”ëŠ” ê²Œì„ì…ë‹ˆë‹¤.</h3>
    <h3 style="color:white;"> ë§Œì•½ ì˜¤ë‹µì„ ê³ ë¥´ì…¨ë‹¤ë©´, ì˜¤ë‹µ ê±´ë¬¼ê³¼ ì •ë‹µ ê±´ë¬¼ ì‚¬ì´ì˜ ê±°ë¦¬ì™€ ë°©í–¥ì´ í‘œì‹œë©ë‹ˆë‹¤.</h3>
    <h3 style="color:white;"> ì˜ˆë¥¼ ë“¤ì–´... 260.6m, â¬‡ï¸ ê°€ ë‚˜ì™”ë‹¤ë©´, ì •ë‹µì€ ì˜¤ë‹µì˜ ë‚¨ìª½ë°©í–¥ 260.6mì— ìˆë‹¤ëŠ” ëœ»ì…ë‹ˆë‹¤.</h3>
    <h3 style="color:white;"> ê¸°íšŒëŠ” ì´ 6ë²ˆì…ë‹ˆë‹¤. í–‰ìš´ì„ ë¹•ë‹ˆë‹¤!</h3>

    <!-- ì˜¤ë²„ë ˆì´ ë‹«ê¸° -->
    <input type="button" onclick='$(".howtoplayOverlay").css("display", "none");' value="ë‹«ê¸°" />
  </div>

    <!-- SNS ê³µìœ í•˜ê¸° -->
					<footer class="wrapper style1 align-center">
						<div class="inner">
							<p style="margin-top: 5%;">&copy; CBNUdle,  <a href="https://github.com/TeamDLE">team DLE</a>.</p>
						</div>
					</footer>



</div>


    <!-- ê²Œì„ ìŠ¤í¬ë¦½íŠ¸ -->
    <script>
	
      //ì½”ì–´ ê¸°ëŠ¥
        function guess_answer()
        {
          //buildingì—ì„œ ê±´ë¬¼ ì´ë¦„ì„ ì°¾ëŠ”ë‹¤.
          var b_raw = document.getElementById("building_list").options[document.getElementById("building_list").selectedIndex].value;
          console.log(b_raw);
          var b_code = b_raw.split(",")[0];
          var guessLat, guessLong, guessCode, guessName;
          $.each(building, function(i, item) 
          {
            if (item.building_Code == b_code) 
            {
              guessLat = item.latitude;
              guessLong = item.longitude;
              guessCode = item.building_Code;
              guessName = item.building_Name;
            }
          });

          var result = isCorrect(answerLat, answerLong, guessLat, guessLong);
          //resultì— ì „ë‹¬ëœ stringì„ ,ë¥¼ ê¸°ì¤€ìœ¼ë¡œ íŒŒì‹±í•©ë‹ˆë‹¤.
          var resultArray = result.split(",");
          console.log(resultArray);

          if (resultArray[0] == 0)
          {
          //ì •ë‹µì´ë©´ ê²°ê³¼ì°½ì„ ë„ìš´ë‹¤.
          let tryBuilding = ".t"+tryCount+"_building";
          let tryDistance = ".t"+tryCount+"_distance";
          let tryDirection = ".t"+tryCount+"_direction";

          $(tryBuilding).append(guessCode + ' ' + guessName);
          $(tryDistance).append((Math.round(resultArray[0]*10)/10) + "m");
          $(tryDirection).append(resultArray[1]);
          overlay_Result();
          }
          else //ì˜¤ë‹µì´ë©´ ê³„ì‚°ëœ ê±°ë¦¬ì™€ ë°©í–¥ì„ ë³´ì—¬ì£¼ê³  ê¸°íšŒë¥¼ í•˜ë‚˜ ì°¨ê°í•œë‹¤.
          {
            let tryBuilding = ".t"+tryCount+"_building";
            let tryDistance = ".t"+tryCount+"_distance";
            let tryDirection = ".t"+tryCount+"_direction";

            $(tryBuilding).append(guessCode + ' ' + guessName);
            $(tryDistance).append((Math.round(resultArray[0]*10)/10) + "m");
            $(tryDirection).append(resultArray[1]);
            tryCount++;
            if (tryCount > 6) overlay_Result();
          }
          //ì •ë‹µì´ê±°ë‚˜ ê¸°íšŒê°€ ì†Œì§„ë˜ë©´ ê²°ê³¼ì°½ì´ overlay ëœë‹¤.
          //ê²°ê³¼ -> ê³µìœ , ë‹¤ì‹œí•˜ê¸°, ê±´ë¬¼ì •ë³´ ë³´ê¸°
        }

     //ê²°ê³¼ì°½ ì˜¤ë²„ë ˆì´
     function overlay_Result()
     {
      $(".resultOverlay").css("display", "block");
      $('.resultOverlay').css('display', 'center');
      $('.resultOverlay').css('opacity', '1');
      $('.resultOverlay').css('z-index', '1');
      $('.resultOverlay').css('background-color', 'rgba(0,0,0,0.85)');
      $('.resultOverlay').css('position', 'fixed');
      $('.resultOverlay').css('top', '0');
      $('.resultOverlay').css('left', '0');
      $('.resultOverlay').css('width', '100%');
      $('.resultOverlay').css('height', '100%');
      $('.resultOverlay').css('text-align', 'center');
      $('.resultOverlay').css('vertical-align', 'middle');
      $('.resultOverlay').css('line-height', '100%');
      $('.resultOverlay').css('color', 'white');
      $('.resultOverlay').css('font-family', 'Nanum Gothic');
      $('.resultOverlay').css('font-weight', 'bold');
      $('.resultOverlay').css('text-shadow', '0 0 10px black');
	  $('.resultOverlay').css('align-items', 'flex');

      $(function(){$('.answerResult').append('<p>ì •ë‹µì€ "'+ answer.building_Code + ' ' + answer.building_Name +'"ì…ë‹ˆë‹¤.</p>');});
      if(tryCount != 7) $(function(){$('.tryCount').append('<p>ì‹œë„ íšŸìˆ˜ëŠ” '+ tryCount + 'íšŒì…ë‹ˆë‹¤. ğŸ‰</p>');});
      else $(function(){$('.tryCount').append('<p>ê¸°íšŒ ë‚´ì— ë§ì¶”ì§€ ëª»í–ˆìŠµë‹ˆë‹¤ ğŸ˜­</p>');});
     }
    //í•˜ëŠ” ë°©ë²• ì˜¤ë²„ë ˆì´
    function overlay_Howtoplay()
    {
      $('.howtoplayOverlay').css("display", "block");
      $('.howtoplayOverlay').css('display', 'center');
      $('.howtoplayOverlay').css('opacity', '1');
      $('.howtoplayOverlay').css('z-index', '1');
      $('.howtoplayOverlay').css('background-color', 'rgba(0,0,0,0.85)');
      $('.howtoplayOverlay').css('position', 'fixed');
      $('.howtoplayOverlay').css('top', '0');
      $('.howtoplayOverlay').css('left', '0');
      $('.howtoplayOverlay').css('width', '100%');
      $('.howtoplayOverlay').css('height', '100%');
      $('.howtoplayOverlay').css('text-align', 'center');
      $('.howtoplayOverlay').css('vertical-align', 'middle');
      $('.howtoplayOverlay').css('line-height', '100%');
      $('.howtoplayOverlay').css('color', 'white');
      $('.howtoplayOverlay').css('font-family', 'Nanum Gothic');
      $('.howtoplayOverlay').css('font-weight', 'bold');
      $('.howtoplayOverlay').css('text-shadow', '0 0 10px black');
    }


     //ê³µìœ 
    function fn_sendFB(sns) 
    {
      var thisUrl = document.URL;
      var snsTitle;

      if(tryCount == 7) snsTitle = answer.building_Code + ' ' + answer.building_Name + "ì„(ë¥¼) ì•Œì•„ë§ì¶”ì§€ ëª»í–ˆìŠµë‹ˆë‹¤... ğŸ˜­ ë‹¹ì‹ ì€ ì¶©ë¶ëŒ€í•™êµë¥¼ ì–¼ë§ˆë‚˜ ì˜ ì•Œê³ ê³„ì‹ ê°€ìš”? #CBNUDle";
      else snsTitle =  answer.building_Code + ' ' + answer.building_Name + "ì„(ë¥¼) " + tryCount + "ë²ˆ ë§Œì— ì•Œì•„ë§ì·„ìŠµë‹ˆë‹¤! ğŸ‰ ë‹¹ì‹ ì€ ì¶©ë¶ëŒ€í•™êµë¥¼ ì–¼ë§ˆë‚˜ ì˜ ì•Œê³ ê³„ì‹ ê°€ìš”? #CBNUDle";;

      if( sns == 'facebook' ) 
      {
          var url = "http://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(thisUrl);
          window.open(url, "", "width=486, height=286");
      }
      else if( sns == 'twitter' ) 
      {
          var url = "http://twitter.com/share?url="+encodeURIComponent(thisUrl)+"&text="+encodeURIComponent(snsTitle);
          window.open(url, "tweetPop", "width=486, height=286,scrollbars=yes");
      }
    }
    </script>
</body>
</html>
